{"version":3,"sources":["webpack:///./src/pages/chart/rightController.vue?be7f","webpack:///./src/pages/chart/fieldChoose.vue?7cfa","webpack:///./src/pages/chart/editor.vue?c61d","webpack:///./src/pages/chart/editor.vue?2397","webpack:///./src/pages/chart/rightController.vue?90eb","webpack:///src/pages/chart/rightController.vue","webpack:///./src/pages/chart/rightController.vue?84c5","webpack:///./src/pages/chart/rightController.vue?f120","webpack:///./src/pages/chart/fieldChoose.vue?373d","webpack:///src/pages/chart/fieldChoose.vue","webpack:///./src/pages/chart/fieldChoose.vue?cfda","webpack:///./src/pages/chart/fieldChoose.vue?f067","webpack:///src/pages/chart/editor.vue","webpack:///./src/pages/chart/editor.vue?7de3","webpack:///./src/pages/chart/editor.vue?435e"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","on","$event","saveChart","$router","go","staticClass","model","value","chart","callback","$$v","$set","expression","_l","sheet","key","workSheetId","_v","_s","title","field","name","fields","sqlConfig","x","y","chartData","_e","staticRenderFns","visible","changeChartType","chartType","props","data","chartTypes","methods","$emit","component","f","index","e","handleMenuClick","slot","setField","mode","label","sortMenu","setSort","sort","finalAliasName","removeField","settingFieldVisible","form","finishSetField","settingField","addField","SUM","AVG","COUNT","DISTINCT_COUNT","MIN","MAX","sortMenus","aggregatorFunc","settingFieldIndex","computed","arrData","push","idx","splice","order","Object","assign","aggregator","type","chartId","workSheets","created","$route","query","getWorkSheets","initChart","getWorkSheet","components","FieldChoose","ChartBox","RightController","$axios","get","then","fetchChartData","post","b"],"mappings":"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","file":"js/chunk-61609406.9b4e5c3a.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rightController.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rightController.vue?vue&type=style&index=0&lang=less&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fieldChoose.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fieldChoose.vue?vue&type=style&index=0&lang=less&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editor.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editor.vue?vue&type=style&index=0&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{}},[_c('a-page-header',{staticStyle:{\"border\":\"1px solid rgb(235, 237, 240)\"},attrs:{\"title\":\"编辑图表\"},on:{\"back\":function($event){_vm.saveChart(); _vm.$router.go(-1);}}}),(_vm.chart)?_c('div',{staticClass:\"editor-main\"},[_c('div',{staticClass:\"left-container\"},[_c('div',{staticStyle:{\"width\":\"100%\"}},[_c('a-select',{staticStyle:{\"width\":\"188px\",\"margin-right\":\"10px\"},model:{value:(_vm.chart.workSheetId),callback:function ($$v) {_vm.$set(_vm.chart, \"workSheetId\", $$v)},expression:\"chart.workSheetId\"}},_vm._l((_vm.workSheets),function(sheet){return _c('a-select-option',{key:sheet.workSheetId,attrs:{\"value\":sheet.workSheetId}},[_vm._v(_vm._s(sheet.title))])}),1),_c('a-button',{attrs:{\"icon\":\"eye\"}})],1),_c('div',{staticClass:\"field-list\"},[_c('a-tabs',{staticStyle:{\"margin-top\":\"10px\"},attrs:{\"size\":\"small\",\"default-active-key\":\"1\"}},[_c('a-tab-pane',{key:\"1\",attrs:{\"tab\":\"字段\"}},[_c('div',{staticClass:\"field-origin-list\"},_vm._l((_vm.fields),function(field){return _c('div',{key:field.name,staticClass:\"field-item\"},[_vm._v(_vm._s(field.title))])}),0)]),_c('a-tab-pane',{key:\"2\",attrs:{\"tab\":\"参数\"}})],1)],1)]),_c('div',{staticClass:\"chart-main\"},[_c('div',{staticClass:\"chart-args\"},[_c('field-choose',{staticClass:\"arg\",attrs:{\"mode\":\"x\",\"fields\":_vm.fields,\"arr-data\":_vm.chart.sqlConfig.x,\"sql-config\":_vm.chart.sqlConfig},on:{\"save\":_vm.saveChart}}),_c('field-choose',{staticClass:\"arg\",attrs:{\"mode\":\"y\",\"fields\":_vm.fields,\"arr-data\":_vm.chart.sqlConfig.y,\"sql-config\":_vm.chart.sqlConfig},on:{\"save\":_vm.saveChart}})],1),_c('div',{staticStyle:{\"height\":\"calc(100vh - 230px)\",\"display\":\"flex\"}},[_c('div',{staticClass:\"chart-filter-container\"}),_c('chart-box',{staticClass:\"chart-box\",attrs:{\"chart\":_vm.chart,\"data\":_vm.chartData}})],1)]),_c('right-controller',{attrs:{\"chart\":_vm.chart},on:{\"refresh\":_vm.saveChart}})],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"setting-button\",on:{\"click\":function($event){_vm.visible = true}}},[_c('a-icon',{staticClass:\"icon\",attrs:{\"type\":\"setting\"}})],1),_c('a-drawer',{attrs:{\"title\":\"设置\",\"placement\":\"right\",\"visible\":_vm.visible,\"width\":\"500px\"},on:{\"close\":function($event){_vm.visible = false}}},[_c('a-form-model',[_c('a-form-model-item',{attrs:{\"label\":\"图表标题\"}},[_c('a-input',{model:{value:(_vm.chart.name),callback:function ($$v) {_vm.$set(_vm.chart, \"name\", $$v)},expression:\"chart.name\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"图表类型\"}},[_c('a-radio-group',{on:{\"change\":_vm.changeChartType},model:{value:(_vm.chart.chartType),callback:function ($$v) {_vm.$set(_vm.chart, \"chartType\", $$v)},expression:\"chart.chartType\"}},_vm._l((_vm.chartTypes),function(chartType){return _c('a-radio-button',{key:chartType.name,attrs:{\"value\":chartType.name}},[_vm._v(_vm._s(chartType.title))])}),1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"setting-button\" @click=\"visible = true\">\n      <a-icon class=\"icon\" type=\"setting\" />\n    </div>\n    <a-drawer\n      title=\"设置\"\n      placement=\"right\"\n      :visible=\"visible\"\n      @close=\"visible = false\"\n      width=\"500px\"\n    >\n      <a-form-model>\n        <a-form-model-item label=\"图表标题\">\n          <a-input v-model=\"chart.name\"></a-input>\n        </a-form-model-item>\n        <a-form-model-item label=\"图表类型\">\n          <a-radio-group v-model=\"chart.chartType\" @change=\"changeChartType\">\n            <a-radio-button\n              v-for=\"chartType in chartTypes\"\n              :key=\"chartType.name\"\n              :value=\"chartType.name\"\n            >{{chartType.title}}</a-radio-button>\n          </a-radio-group>\n        </a-form-model-item>\n      </a-form-model>\n    </a-drawer>\n  </div>\n</template>\n\n<script>\nimport { chartTypes } from \"../components/chartPaint.js\";\nexport default {\n  props: [\"chart\"],\n  data() {\n    return {\n      visible: false,\n      chartTypes\n    };\n  },\n  methods: {\n    changeChartType() {\n      this.$emit(\"refresh\");\n    }\n  }\n};\n</script>\n\n<style lang=\"less\">\n.setting-button {\n  top: 100px;\n  right: 20px;\n  position: absolute;\n  width: 40px;\n  height: 40px;\n  background: #fff;\n  box-sizing: border-box;\n  background: #4876ff;\n  box-shadow: 1px 1px 6px rgba(0, 0, 0, 0.4);\n  cursor: pointer;\n  z-index: 100;\n  border-radius: 4px;\n  text-align: center;\n  user-select: none;\n  .icon {\n    font-size: 22px;\n    color: #fff;\n    line-height: 48px;\n  }\n  .title {\n    margin-left: 5px;\n    color: #fff;\n    font-size: 16px;\n    line-height: 40px;\n  }\n  &:hover {\n    background: #4876ff;\n    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rightController.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rightController.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./rightController.vue?vue&type=template&id=f22071a2&\"\nimport script from \"./rightController.vue?vue&type=script&lang=js&\"\nexport * from \"./rightController.vue?vue&type=script&lang=js&\"\nimport style0 from \"./rightController.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"field-line\"},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.title))]),_vm._l((_vm.arrData),function(f,index){return _c('div',{key:index,staticClass:\"field-block\"},[_c('a-dropdown',[_c('a-menu',{attrs:{\"slot\":\"overlay\"},on:{\"click\":function (e) { return _vm.handleMenuClick(e, f); }},slot:\"overlay\"},[_c('a-sub-menu',{key:\"field\",attrs:{\"title\":\"选择字段\"}},_vm._l((_vm.fields),function(field){return _c('a-menu-item',{key:field.name},[_vm._v(_vm._s(field.title))])}),1),_c('a-menu-item',{key:\"3\",on:{\"click\":function($event){return _vm.setField(index)}}},[_vm._v(\"设置字段\")]),(_vm.mode === 'y')?_c('a-sub-menu',{key:\"aggregator\",attrs:{\"title\":\"聚合函数\"}},_vm._l((_vm.aggregatorFunc),function(label,value){return _c('a-menu-item',{key:value},[_vm._v(_vm._s(label))])}),1):_vm._e(),_c('a-sub-menu',{key:\"sort\",attrs:{\"title\":\"排序\"}},_vm._l((_vm.sortMenus),function(sortMenu){return _c('a-menu-item',{key:sortMenu.name,on:{\"click\":function($event){return _vm.setSort(f, sortMenu.name)}}},[_vm._v(_vm._s(sortMenu.title))])}),1)],1),_c('a-button',{staticStyle:{\"margin-left\":\"8px\"}},[(_vm.sqlConfig.sort && _vm.sqlConfig.sort.name === f.name)?_c('a-icon',{staticStyle:{\"margin-right\":\"5px\"},attrs:{\"type\":(\"sort-\" + (_vm.sqlConfig.sort.orderType) + \"ending\")}}):_vm._e(),_vm._v(\" \"+_vm._s(f.finalAliasName)+\" \"),_c('a-icon',{attrs:{\"type\":\"down\"}})],1)],1),_c('a-button',{staticStyle:{\"margin-left\":\"-1px\",\"font-size\":\"14px\"},attrs:{\"icon\":\"close\"},on:{\"click\":function($event){return _vm.removeField(index)}}})],1)}),_c('a-modal',{attrs:{\"destroyOnClose\":true,\"visible\":_vm.settingFieldVisible,\"width\":400,\"title\":\"修改字段\"},on:{\"cancel\":function () {_vm.settingFieldVisible = false; _vm.form ={};},\"ok\":_vm.finishSetField}},[_c('a-form-model-item',{attrs:{\"label\":\"字段别名\"}},[_c('a-input',{model:{value:(_vm.settingField.aliasName),callback:function ($$v) {_vm.$set(_vm.settingField, \"aliasName\", $$v)},expression:\"settingField.aliasName\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"字段描述\"}},[_c('a-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.settingField.description),callback:function ($$v) {_vm.$set(_vm.settingField, \"description\", $$v)},expression:\"settingField.description\"}})],1)],1),_c('a-button',{staticClass:\"add-button\",attrs:{\"icon\":\"plus\"},on:{\"click\":_vm.addField}})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"field-line\">\n    <div class=\"title\">{{title}}</div>\n    <div :key=\"index\" class=\"field-block\" v-for=\"(f,index) in arrData\">\n      <a-dropdown>\n        <a-menu @click=\"e => handleMenuClick(e, f)\" slot=\"overlay\">\n          <a-sub-menu key=\"field\" title=\"选择字段\">\n            <a-menu-item :key=\"field.name\" v-for=\"field in fields\">{{field.title}}</a-menu-item>\n          </a-sub-menu>\n          <a-menu-item @click=\"setField(index)\" key=\"3\">设置字段</a-menu-item>\n          <a-sub-menu key=\"aggregator\" title=\"聚合函数\" v-if=\"mode === 'y'\">\n            <a-menu-item :key=\"value\" v-for=\"(label, value) in aggregatorFunc\">{{label}}</a-menu-item>\n          </a-sub-menu>\n          <a-sub-menu key=\"sort\" title=\"排序\">\n            <a-menu-item\n              :key=\"sortMenu.name\"\n              @click=\"setSort(f, sortMenu.name)\"\n              v-for=\"sortMenu in sortMenus\"\n            >{{sortMenu.title}}</a-menu-item>\n          </a-sub-menu>\n        </a-menu>\n        <a-button style=\"margin-left: 8px\">\n          <a-icon\n            style=\"margin-right: 5px;\"\n            v-if=\"sqlConfig.sort && sqlConfig.sort.name === f.name\"\n            :type=\"`sort-${sqlConfig.sort.orderType}ending`\"\n          />\n          {{f.finalAliasName}}\n          <a-icon type=\"down\" />\n        </a-button>\n      </a-dropdown>\n      <a-button @click=\"removeField(index)\" icon=\"close\" style=\"margin-left: -1px; font-size:14px;\"></a-button>\n    </div>\n    <a-modal\n      :destroyOnClose=\"true\"\n      :visible=\"settingFieldVisible\"\n      :width=\"400\"\n      @cancel=\"() => {settingFieldVisible = false; form ={};}\"\n      @ok=\"finishSetField\"\n      title=\"修改字段\"\n    >\n      <a-form-model-item label=\"字段别名\">\n        <a-input v-model=\"settingField.aliasName\"></a-input>\n      </a-form-model-item>\n      <a-form-model-item label=\"字段描述\">\n        <a-input type=\"textarea\" v-model=\"settingField.description\"></a-input>\n      </a-form-model-item>\n    </a-modal>\n    <a-button @click=\"addField\" class=\"add-button\" icon=\"plus\"></a-button>\n  </div>\n</template>\n\n<script>\nconst sortMenus = [\n  {\n    name: \"default\",\n    title: \"默认\"\n  },\n  {\n    name: \"asc\",\n    title: \"升序\"\n  },\n  {\n    name: \"desc\",\n    title: \"降序\"\n  }\n];\nconst aggregatorFunc = {\n  SUM: \"求和\",\n  AVG: \"平均值\",\n  COUNT: \"计数\",\n  DISTINCT_COUNT: \"去重计数\",\n  MIN: \"最小值\",\n  MAX: \"最大值\"\n};\nlet idx = 1;\nexport default {\n  props: [\"mode\", \"fields\", \"arrData\", \"sqlConfig\"],\n  data() {\n    return {\n      sortMenus,\n      aggregatorFunc,\n      settingField: {},\n      settingFieldVisible: false,\n      settingFieldIndex: \"\"\n    };\n  },\n  computed: {\n    title() {\n      switch (this.mode) {\n        case \"x\":\n          return \"维度\";\n        case \"y\":\n          return \"数值\";\n        default:\n          return \"\";\n      }\n    }\n  },\n  methods: {\n    addField() {\n      this.arrData.push({\n        name: \"\",\n        title: \"未选择\",\n        idx: idx++\n      });\n    },\n    removeField(index) {\n      this.arrData.splice(index, 1);\n      this.saveChart();\n    },\n    handleMenuClick(e, field) {\n      const order = e.keyPath[1];\n      if (order === \"sort\") {\n        return;\n      }\n      if (order === \"field\") {\n        Object.assign(field, { ...this.fields.find(f => f.name === e.key) });\n        if (this.mode === \"y\") {\n          field.aggregator = field.type === \"value\" ? \"SUM\" : \"COUNT\";\n        }\n      }\n      if (order === \"aggregator\") {\n        field.aggregator = e.key;\n      }\n      this.saveChart();\n    },\n    setField(index) {\n      this.settingFieldVisible = true;\n      this.settingFieldIndex = index;\n      this.settingField = this.arrData[index];\n    },\n    finishSetField() {\n      Object.assign(this.arrData[this.settingFieldIndex], this.settingField);\n      this.settingFieldVisible = false;\n      this.saveChart();\n    },\n    setSort(field, orderType) {\n      const sort =\n        orderType === \"default\"\n          ? null\n          : {\n              name: field.name,\n              orderType\n            };\n      this.sqlConfig.sort = sort;\n      this.saveChart();\n    },\n    saveChart() {\n      this.$emit(\"save\");\n    }\n  }\n};\n</script>\n\n<style lang=\"less\">\n.field-line {\n  height: 40px;\n  display: flex;\n  width: 100%;\n\n  .title {\n    font-size: 16px;\n    line-height: 30px;\n    margin-right: 10px;\n  }\n\n  .field-block {\n    display: flex;\n  }\n\n  .add-button {\n    margin-left: 10px;\n    // flex-flow: ;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fieldChoose.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fieldChoose.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./fieldChoose.vue?vue&type=template&id=26e0818a&\"\nimport script from \"./fieldChoose.vue?vue&type=script&lang=js&\"\nexport * from \"./fieldChoose.vue?vue&type=script&lang=js&\"\nimport style0 from \"./fieldChoose.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div style=\"editor-container\">\n    <a-page-header\n      style=\"border: 1px solid rgb(235, 237, 240)\"\n      title=\"编辑图表\"\n      @back=\"saveChart(); $router.go(-1);\"\n    />\n    <div class=\"editor-main\" v-if=\"chart\">\n      <div class=\"left-container\">\n        <div style=\"width: 100%;\">\n          <a-select v-model=\"chart.workSheetId\" style=\"width: 188px;margin-right:10px;\">\n            <a-select-option\n              v-for=\"sheet in workSheets\"\n              :key=\"sheet.workSheetId\"\n              :value=\"sheet.workSheetId\"\n            >{{sheet.title}}</a-select-option>\n          </a-select>\n          <a-button icon=\"eye\"></a-button>\n        </div>\n        <div class=\"field-list\">\n          <a-tabs size=\"small\" style=\"margin-top: 10px;\" default-active-key=\"1\">\n            <a-tab-pane key=\"1\" tab=\"字段\">\n              <div class=\"field-origin-list\">\n                <div class=\"field-item\" v-for=\"field in fields\" :key=\"field.name\">{{field.title}}</div>\n              </div>\n            </a-tab-pane>\n            <a-tab-pane key=\"2\" tab=\"参数\"></a-tab-pane>\n          </a-tabs>\n        </div>\n      </div>\n      <div class=\"chart-main\">\n        <div class=\"chart-args\">\n          <field-choose\n            mode=\"x\"\n            class=\"arg\"\n            :fields=\"fields\"\n            :arr-data=\"chart.sqlConfig.x\"\n            :sql-config=\"chart.sqlConfig\"\n            @save=\"saveChart\"\n          />\n          <field-choose\n            mode=\"y\"\n            class=\"arg\"\n            :fields=\"fields\"\n            :arr-data=\"chart.sqlConfig.y\"\n            :sql-config=\"chart.sqlConfig\"\n            @save=\"saveChart\"\n          />\n        </div>\n        <div style=\"height: calc(100vh - 230px); display:flex;\">\n          <div class=\"chart-filter-container\"></div>\n          <chart-box class=\"chart-box\" :chart=\"chart\" :data=\"chartData\" />\n        </div>\n      </div>\n      <right-controller :chart=\"chart\" @refresh=\"saveChart\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport RightController from \"./rightController\";\nimport ChartBox from \"../components/chartBox\";\nimport FieldChoose from \"./fieldChoose\";\nexport default {\n  data() {\n    return {\n      chartId: \"\",\n      chart: null,\n      workSheets: [],\n      chartData: [],\n      fields: [],\n      workSheetId: \"\"\n    };\n  },\n  created() {\n    this.chartId = this.$route.query.chartId;\n    this.workSheetId = this.$route.query.workSheetId;\n\n    this.getWorkSheets();\n    this.initChart();\n    this.getWorkSheet();\n  },\n  components: {\n    FieldChoose,\n    ChartBox,\n    RightController\n  },\n  methods: {\n    initChart() {\n      this.$axios.get(`/chart?chartId=${this.chartId}`).then(data => {\n        this.chart = data;\n        this.fetchChartData();\n      });\n    },\n    getWorkSheets() {\n      this.$axios.get(\"/workSheet/list\").then(data => {\n        this.workSheets = data;\n      });\n    },\n    getWorkSheet() {\n      this.$axios.get(`/workSheet?id=${this.workSheetId}`).then(data => {\n        this.fields = data.fields;\n      });\n    },\n    fetchChartData() {\n      this.$axios\n        .get(`/chart/data?chartId=${this.chart.chartId}`)\n        .then(data => {\n          this.chartData = data;\n        });\n    },\n    saveChart() {\n      this.chart.chartType = this.chart.chartType || \"UNKNOWN\";\n      this.$axios.post(\"/chart\", this.chart).then(b => {\n        if (b) {\n          this.initChart();\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"less\">\n// .editor-container {\n//   position: relative;\n//   height: 100%;\n.editor-main {\n  position: relative;\n  display: flex;\n  background: #f6f6f6;\n  height: calc(100vh - 68px);\n  overflow: hidden;\n  .left-container {\n    padding: 10px;\n    width: 250px;\n    height: calc(100vh - 111px);\n    .field-list {\n      margin-top: 10px;\n      border: 1px solid #e6e6e6;\n      background: #fff;\n      padding: 0 20px 20px 20px;\n      height: 100%;\n      overflow: auto;\n      .field-item {\n        padding: 10px;\n      }\n    }\n  }\n  .chart-main {\n    position: relative;\n    margin-top: 10px;\n    height: calc(100vh - 90px);\n    width: calc(100% - 260px);\n    .chart-args {\n      padding: 20px;\n      border: 1px solid #e6e6e6;\n      background: #fff;\n      margin-bottom: 10px;\n      .arg {\n        margin-bottom: 10px;\n      }\n    }\n    .chart-filter-container {\n      width: 250px;\n      padding: 20px;\n      border: 1px solid #e6e6e6;\n      background: #fff;\n      height: calc(100vh - 240px);\n      overflow: auto;\n      margin-right: 10px;\n    }\n    .chart-box {\n      padding: 20px;\n      border: 1px solid #e6e6e6;\n      background: #fff;\n      width: 100%;\n      height: calc(100vh - 240px);\n      width: calc(100% - 260px);\n    }\n  }\n}\n// }\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./editor.vue?vue&type=template&id=744bc8dc&\"\nimport script from \"./editor.vue?vue&type=script&lang=js&\"\nexport * from \"./editor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./editor.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}