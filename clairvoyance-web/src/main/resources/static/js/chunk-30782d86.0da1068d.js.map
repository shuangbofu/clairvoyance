{"version":3,"sources":["webpack:///./src/pages/dashboard/index.vue?99a4","webpack:///./src/pages/components/catalogue.vue?0e04","webpack:///src/pages/components/catalogue.vue","webpack:///./src/pages/components/catalogue.vue?cc0a","webpack:///./src/pages/components/catalogue.vue?debf","webpack:///./src/pages/components/catalogue.vue?882f","webpack:///./src/pages/dashboard/chartItem.vue?2769","webpack:///./node_modules/core-js/modules/web.dom-collections.iterator.js","webpack:///./src/pages/dashboard/index.vue?d9cd","webpack:///./src/pages/dashboard/chartItem.vue?2831","webpack:///src/pages/dashboard/chartItem.vue","webpack:///./src/pages/dashboard/chartItem.vue?bdfc","webpack:///./src/pages/dashboard/chartItem.vue?6a93","webpack:///src/pages/dashboard/index.vue","webpack:///./src/pages/dashboard/index.vue?802f","webpack:///./src/pages/dashboard/index.vue?8cce"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","span","staticStyle","model","value","callback","$$v","filterValue","expression","slot","on","handleMenuClick","key","_v","treeData","length","filteredTreeData","defaultExpandedKeys","defaultSelectedKeys","expandNode","selectNode","$event","scopedSlots","_u","fn","ref","expanded","data","folder","_s","title","item","remarks","_e","tableName","description","treeIcon","_t","menuKey","visible","confirmLoading","handleOk","form","parentId","_b","labelCol","wrapperCol","maxHeight","overflow","selectedTreeData","$set","staticRenderFns","setLocal","localStorage","setItem","JSON","stringify","getLocal","parse","getItem","selectTreeNode","nodes","nodesAfterFilter","forEach","i","isLeaf","includes","res","push","line","children","props","dashboard","dashboardLoading","created","init","components","computed","selectedKeysLocalKey","expandedKeysLocalKey","selectedRefIdKey","methods","$axios","get","selectedRefId","selectedKeys","node","dataRef","refId","selected","chooseDashboard","expandedKeys","e","$emit","id","loaded","url","$message","error","convert2Node","name","map","selectable","component","global","DOMIterables","ArrayIteratorMethods","createNonEnumerableProperty","wellKnownSymbol","ITERATOR","TO_STRING_TAG","ArrayValues","values","COLLECTION_NAME","Collection","CollectionPrototype","prototype","METHOD_NAME","addChart","charts","_l","chart","filterOption","sheet","workSheetId","link2Editor","fetchData","style","color","fillInnerFilter","height","drillParam","sqlConfig","layers","level","chartData","onClick","drillFields","realAliasName","rollUp","innerFilters","filter","ChartBox","DrillCrumbs","post","$store","commit","$router","index","slice","workSheets","Catalogue","ChartItem","then"],"mappings":"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","file":"js/chunk-30782d86.0da1068d.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"dashboard-container\"},[_c('a-row',{attrs:{\"type\":\"flex\",\"justify\":\"center\",\"align\":\"top\",\"gutter\":16}},[_c('a-col',{attrs:{\"xs\":{span: 7},\"xl\":{span: 5},\"xxl\":{span: 5}}},[_c('div',{staticClass:\"catalogue-container\"},[_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"space-between\"}},[_c('a-input',{attrs:{\"placeholder\":\"过滤\",\"icon\":\"FilterOutlined\"},model:{value:(_vm.filterValue),callback:function ($$v) {_vm.filterValue=$$v},expression:\"filterValue\"}},[_c('a-icon',{attrs:{\"slot\":\"suffix\",\"type\":\"filter\"},slot:\"suffix\"})],1),_c('a-dropdown',{attrs:{\"trigger\":['click']}},[_c('a-menu',{attrs:{\"slot\":\"overlay\"},on:{\"click\":_vm.handleMenuClick},slot:\"overlay\"},[_c('a-menu-item',{key:\"文件夹\"},[_c('a-icon',{attrs:{\"type\":\"folder\"}}),_vm._v(\"创建文件夹 \")],1),_c('a-menu-item',{key:\"仪表盘\"},[_c('a-icon',{attrs:{\"type\":\"dashboard\"}}),_vm._v(\"创建仪表盘 \")],1)],1),_c('div',[_c('a-button',{staticStyle:{\"margin-left\":\"5px\",\"color\":\"#666\",\"font-size\":\"16px\"},attrs:{\"type\":\"link\",\"icon\":\"plus\"}})],1)],1)],1),_c('div',{staticClass:\"catalogue-tree\"},[(_vm.treeData.length > 0)?_c('a-tree',{attrs:{\"show-icon\":\"\",\"tree-data\":_vm.filteredTreeData,\"expandedKeys\":_vm.defaultExpandedKeys,\"selectedKeys\":_vm.defaultSelectedKeys},on:{\"expand\":_vm.expandNode,\"select\":_vm.selectNode,\"update:expandedKeys\":function($event){_vm.defaultExpandedKeys=$event},\"update:expanded-keys\":function($event){_vm.defaultExpandedKeys=$event},\"update:selectedKeys\":function($event){_vm.defaultSelectedKeys=$event},\"update:selected-keys\":function($event){_vm.defaultSelectedKeys=$event}},scopedSlots:_vm._u([{key:\"folder\",fn:function(ref){\nvar expanded = ref.expanded;\nreturn [_c('a-icon',{staticClass:\"tree-icon\",attrs:{\"theme\":\"outlined\",\"type\":expanded ? 'folder-open': 'folder'}})]}},{key:\"title\",fn:function(data){return [(!data.folder)?_c('a-tooltip',{attrs:{\"overlayClassName\":\"tooltip\",\"placement\":\"right\",\"overlayStyle\":{\n              'background': '#fff'\n            }}},[_c('template',{slot:\"title\"},[(_vm.item === 'dashboard')?[_c('div',[_vm._v(\"名称：\"+_vm._s(data.title))]),_c('div',[_vm._v(\"备注：\"+_vm._s(data.remarks))])]:_vm._e(),(_vm.item === 'workSheet')?[_c('div',[_vm._v(\"名称：\"+_vm._s(data.title))]),_c('div',[_vm._v(\"原名：\"+_vm._s(data.tableName))]),_c('div',[_vm._v(\"描述：\"+_vm._s(data.description))])]:_vm._e()],2),_vm._v(\" \"+_vm._s(data.title)+\" \")],2):[_vm._v(_vm._s(data.title))]]}}],null,false,2447245915)},[_c('a-icon',{staticClass:\"tree-icon\",attrs:{\"slot\":_vm.item,\"theme\":\"outlined\",\"type\":_vm.treeIcon},slot:_vm.item})],1):_vm._e()],1)])]),_c('a-col',{attrs:{\"xs\":{span: 17},\"xl\":{span: 19},\"xxl\":{span: 19}}},[_c('div',{staticClass:\"right-container\"},[(_vm.dashboardLoading)?_c('a-spin',{staticClass:\"spin\",attrs:{\"tip\":\"仪表盘加载中……\"}}):[_vm._t(\"right-container\")]],2)])],1),_c('a-modal',{attrs:{\"title\":(\"新建\" + _vm.menuKey),\"visible\":_vm.visible,\"confirm-loading\":_vm.confirmLoading,\"destroyOnClose\":true},on:{\"ok\":_vm.handleOk,\"cancel\":function () {_vm.visible = false; _vm.form = {parentId: ''};}}},[_c('a-form-model',_vm._b({model:{value:(_vm.form),callback:function ($$v) {_vm.form=$$v},expression:\"form\"}},'a-form-model',{\n      labelCol: { span: 6 },\n      wrapperCol: { span: 16 },\n    },false),[_c('a-form-model-item',{attrs:{\"label\":\"所属文件夹\"}},[_c('a-tree-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"dropdown-style\":{ maxHeight: '400px', overflow: 'auto' },\"tree-data\":_vm.selectedTreeData,\"tree-default-expand-all\":\"\"},model:{value:(_vm.form.parentId),callback:function ($$v) {_vm.$set(_vm.form, \"parentId\", $$v)},expression:\"form.parentId\"}})],1),_c('a-form-model-item',{attrs:{\"label\":(_vm.menuKey + \"名称\")}},[_c('a-input',{model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),(_vm.menuKey == '仪表盘')?_c('a-form-model-item',{attrs:{\"label\":(_vm.menuKey + \"备注\")}},[_c('a-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.form.remarks),callback:function ($$v) {_vm.$set(_vm.form, \"remarks\", $$v)},expression:\"form.remarks\"}})],1):_vm._e()],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"dashboard-container\">\n    <a-row type=\"flex\" justify=\"center\" align=\"top\" :gutter=\"16\">\n      <a-col :xs=\"{span: 7}\" :xl=\"{span: 5}\" :xxl=\"{span: 5}\">\n        <div class=\"catalogue-container\">\n          <div style=\"display: flex; justify-content: space-between\">\n            <a-input placeholder=\"过滤\" v-model=\"filterValue\" icon=\"FilterOutlined\">\n              <a-icon type=\"filter\" slot=\"suffix\" />\n            </a-input>\n            <a-dropdown :trigger=\"['click']\">\n              <a-menu slot=\"overlay\" @click=\"handleMenuClick\">\n                <a-menu-item key=\"文件夹\">\n                  <a-icon type=\"folder\" />创建文件夹\n                </a-menu-item>\n                <a-menu-item key=\"仪表盘\">\n                  <a-icon type=\"dashboard\" />创建仪表盘\n                </a-menu-item>\n              </a-menu>\n              <div>\n                <a-button\n                  type=\"link\"\n                  style=\"margin-left: 5px; color: #666; font-size: 16px;\"\n                  icon=\"plus\"\n                ></a-button>\n              </div>\n            </a-dropdown>\n          </div>\n          <div class=\"catalogue-tree\">\n            <a-tree\n              v-if=\"treeData.length > 0\"\n              show-icon\n              :tree-data=\"filteredTreeData\"\n              @expand=\"expandNode\"\n              @select=\"selectNode\"\n              :expandedKeys.sync=\"defaultExpandedKeys\"\n              :selectedKeys.sync=\"defaultSelectedKeys\"\n            >\n              <template slot-scope=\"{expanded}\" slot=\"folder\">\n                <a-icon\n                  class=\"tree-icon\"\n                  theme=\"outlined\"\n                  :type=\"expanded ? 'folder-open': 'folder'\"\n                ></a-icon>\n              </template>\n              <a-icon class=\"tree-icon\" theme=\"outlined\" :type=\"treeIcon\" :slot=\"item\" />\n              <template slot=\"title\" slot-scope=\"data\">\n                <a-tooltip\n                  v-if=\"!data.folder\"\n                  overlayClassName=\"tooltip\"\n                  placement=\"right\"\n                  :overlayStyle=\"{\n                'background': '#fff'\n              }\"\n                >\n                  <template slot=\"title\">\n                    <template v-if=\"item === 'dashboard'\">\n                      <div>名称：{{data.title}}</div>\n                      <div>备注：{{data.remarks}}</div>\n                    </template>\n                    <template v-if=\"item === 'workSheet'\">\n                      <div>名称：{{data.title}}</div>\n                      <div>原名：{{data.tableName}}</div>\n                      <div>描述：{{data.description}}</div>\n                    </template>\n                  </template>\n                  {{data.title}}\n                </a-tooltip>\n                <template v-else>{{data.title}}</template>\n              </template>\n            </a-tree>\n          </div>\n        </div>\n      </a-col>\n      <a-col :xs=\"{span: 17}\" :xl=\"{span: 19}\" :xxl=\"{span: 19}\">\n        <div class=\"right-container\">\n          <a-spin class=\"spin\" v-if=\"dashboardLoading\" tip=\"仪表盘加载中……\" />\n          <template v-else>\n            <slot name=\"right-container\"></slot>\n          </template>\n        </div>\n      </a-col>\n    </a-row>\n    <a-modal\n      :title=\"`新建${menuKey}`\"\n      :visible=\"visible\"\n      :confirm-loading=\"confirmLoading\"\n      :destroyOnClose=\"true\"\n      @ok=\"handleOk\"\n      @cancel=\"() => {visible = false; form = {parentId: ''};}\"\n    >\n      <a-form-model\n        v-model=\"form\"\n        v-bind=\"{\n        labelCol: { span: 6 },\n        wrapperCol: { span: 16 },\n      }\"\n      >\n        <a-form-model-item label=\"所属文件夹\">\n          <a-tree-select\n            v-model=\"form.parentId\"\n            style=\"width: 100%\"\n            :dropdown-style=\"{ maxHeight: '400px', overflow: 'auto' }\"\n            :tree-data=\"selectedTreeData\"\n            tree-default-expand-all\n          ></a-tree-select>\n        </a-form-model-item>\n        <a-form-model-item :label=\"`${menuKey}名称`\">\n          <a-input v-model=\"form.name\" />\n        </a-form-model-item>\n        <a-form-model-item v-if=\"menuKey == '仪表盘'\" :label=\"`${menuKey}备注`\">\n          <a-input type=\"textarea\" v-model=\"form.remarks\" />\n        </a-form-model-item>\n      </a-form-model>\n    </a-modal>\n  </div>\n</template>\n\n<script>\nfunction setLocal(key, value) {\n  localStorage.setItem(key, JSON.stringify(value));\n}\n\nfunction getLocal(key) {\n  return JSON.parse(localStorage.getItem(key));\n}\n\n// function convert2Node(data) {\n//   const res = {\n//     title: data.name,\n//     ...data,\n//     key: \"node_\" + data.id,\n//     value: data.id,\n//     isLeaf: !data.folder || data.children.length === 0,\n//     children: data.children.map(c => convert2Node(c)),\n//     selectable: !data.folder\n//   };\n//   if (!data.folder) {\n//     res.scopedSlots = { icon: this.item, title: \"title\" };\n//   } else {\n//     res.scopedSlots = { icon: \"folder\", title: \"title\" };\n//   }\n//   return res;\n// }\n\nfunction selectTreeNode(nodes) {\n  return nodes\n    .filter(i => i.folder)\n    .map(i => {\n      return {\n        ...i,\n        selectable: true,\n        children: selectTreeNode(i.children)\n      };\n    });\n}\n\nfunction nodesAfterFilter(nodes, value) {\n  let res = [];\n  nodes.forEach(i => {\n    if (i.isLeaf) {\n      if (i.title.includes(value)) {\n        res.push(i);\n      }\n    } else {\n      const line = { ...i, children: nodesAfterFilter(i.children, value) };\n      if (line.children.length > 0) {\n        res.push(line);\n      }\n    }\n  });\n  return res;\n}\n\nexport default {\n  props: [\"item\"],\n  data() {\n    return {\n      treeData: [],\n      defaultExpandedKeys: [],\n      defaultSelectedKeys: [],\n      filterValue: \"\",\n      visible: false,\n      confirmLoading: false,\n      menuKey: \"\",\n      form: {\n        parentId: \"\"\n      },\n      dashboard: {},\n      dashboardLoading: true\n    };\n  },\n  created() {\n    this.init();\n  },\n  components: {},\n  computed: {\n    selectedKeysLocalKey() {\n      return `${this.item}_selectedKeys`;\n    },\n    expandedKeysLocalKey() {\n      return `${this.item}_expandedKeys`;\n    },\n    selectedRefIdKey() {\n      return `${this.item}_ref_id`;\n    },\n    filteredTreeData() {\n      return nodesAfterFilter(this.treeData, this.filterValue);\n    },\n    selectedTreeData() {\n      return selectTreeNode(this.treeData);\n    },\n    treeIcon() {\n      if (this.item === \"workSheet\") {\n        return \"table\";\n      }\n      return this.item;\n    }\n  },\n  methods: {\n    init() {\n      this.defaultSelectedKeys = getLocal(this.selectedKeysLocalKey);\n      this.defaultExpandedKeys = getLocal(this.expandedKeysLocalKey);\n      const selectedRefId = getLocal(this.selectedRefIdKey);\n      this.$axios.get(`/${this.item}/catalogue`).then(data => {\n        const newData = [\n          {\n            name: \"根目录\",\n            id: 0,\n            refId: 0,\n            folder: true,\n            children: data\n          }\n        ];\n        const treeData = newData.map(d => this.convert2Node(d));\n        this.treeData = treeData;\n        if (selectedRefId != null) {\n          this.chooseDashboard(selectedRefId);\n        } else {\n          this.dashboardLoading = false;\n        }\n      });\n    },\n    selectNode(selectedKeys, { node }) {\n      // TODO 取消反选\n      setLocal(this.selectedKeysLocalKey, selectedKeys);\n      this.selectedKeys = selectedKeys;\n      if (!node.dataRef.folder) {\n        setLocal(this.selectedRefIdKey, node.dataRef.refId);\n        if (!node.selected) {\n          this.chooseDashboard(node.dataRef.refId);\n        }\n      }\n    },\n    expandNode(expandedKeys) {\n      setLocal(this.expandedKeysLocalKey, expandedKeys);\n    },\n    handleMenuClick(e) {\n      this.menuKey = e.key;\n      this.visible = true;\n    },\n    chooseDashboard(id) {\n      this.dashboardLoading = true;\n      this.$emit(\"choose\", id);\n    },\n    loaded() {\n      this.dashboardLoading = false;\n    },\n    handleOk() {\n      if (this.form.parentId === \"\") {\n        this.$message.error(\"所属文件夹不能为空！\");\n        return;\n      }\n      let url = `/${this.item}`;\n      if (this.menuKey === \"文件夹\") {\n        url += \"/folder\";\n      }\n      this.confirmLoading = true;\n      this.$axios\n        .post(url, this.form)\n        .then(value => {\n          if (value) {\n            this.confirmLoading = false;\n            this.$message.success(`创建${this.menuKey}成功！`);\n            this.visible = false;\n\n            if (this.menuKey !== \"文件夹\") {\n              setLocal(this.selectedKeysLocalKey, [`node_${value.nodeId}`]);\n              setLocal(this.selectedRefIdKey, value.dashboardId);\n            }\n            this.defaultExpandedKeys.push(`node_${this.form.parentId}`);\n            setLocal(this.expandedKeysLocalKey, this.defaultExpandedKeys);\n\n            // this.addExandedkey(`node_${this.form.parentId}`);\n            this.init();\n          }\n        })\n        .catch(msg => {\n          console.log(msg);\n          this.confirmLoading = false;\n        });\n    },\n    convert2Node(data) {\n      const res = {\n        title: data.name,\n        ...data,\n        key: \"node_\" + data.id,\n        value: data.id,\n        isLeaf: !data.folder || data.children.length === 0,\n        children: data.children.map(c => this.convert2Node(c)),\n        selectable: !data.folder\n      };\n      if (!data.folder) {\n        res.scopedSlots = { icon: this.item, title: \"title\" };\n      } else {\n        res.scopedSlots = { icon: \"folder\", title: \"title\" };\n      }\n      return res;\n    }\n  }\n};\n</script>\n\n<style lang=\"less\">\n.dashboard-container {\n  background: #f6f6f6;\n  .catalogue-container {\n    width: 100%;\n    padding: 10px;\n    overflow: auto;\n    height: calc(100vh - 94px);\n    border: 1px solid #e6e6e6;\n    background: #fff;\n    box-shadow: 0 2px 4px rgba(0, 21, 41, 0.08);\n    // box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.1), 0 16px 24px 0 rgba(0, 0, 0, 0.1);\n    .tree-icon {\n      color: #4876ff;\n      margin-right: 5px;\n    }\n    .tooltip {\n      // background: #fff;\n      color: red;\n    }\n  }\n  .right-container {\n    // padding: 20px;\n    // border: 1px solid #e6e6e6;\n    width: 100%;\n    height: calc(100vh - 95px);\n    // background: #fff;\n    overflow: auto;\n    .spin {\n      text-align: center;\n      margin: 100px 0;\n      width: 100%;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./catalogue.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./catalogue.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./catalogue.vue?vue&type=template&id=27473a4d&\"\nimport script from \"./catalogue.vue?vue&type=script&lang=js&\"\nexport * from \"./catalogue.vue?vue&type=script&lang=js&\"\nimport style0 from \"./catalogue.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./catalogue.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./catalogue.vue?vue&type=style&index=0&lang=less&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chartItem.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chartItem.vue?vue&type=style&index=0&lang=less&\"","var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar ArrayIteratorMethods = require('../modules/es.array.iterator');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar ArrayValues = ArrayIteratorMethods.values;\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  if (CollectionPrototype) {\n    // some Chrome versions have non-configurable methods on DOMTokenList\n    if (CollectionPrototype[ITERATOR] !== ArrayValues) try {\n      createNonEnumerableProperty(CollectionPrototype, ITERATOR, ArrayValues);\n    } catch (error) {\n      CollectionPrototype[ITERATOR] = ArrayValues;\n    }\n    if (!CollectionPrototype[TO_STRING_TAG]) {\n      createNonEnumerableProperty(CollectionPrototype, TO_STRING_TAG, COLLECTION_NAME);\n    }\n    if (DOMIterables[COLLECTION_NAME]) for (var METHOD_NAME in ArrayIteratorMethods) {\n      // some Chrome versions have non-configurable methods on DOMTokenList\n      if (CollectionPrototype[METHOD_NAME] !== ArrayIteratorMethods[METHOD_NAME]) try {\n        createNonEnumerableProperty(CollectionPrototype, METHOD_NAME, ArrayIteratorMethods[METHOD_NAME]);\n      } catch (error) {\n        CollectionPrototype[METHOD_NAME] = ArrayIteratorMethods[METHOD_NAME];\n      }\n    }\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('catalogue',{ref:\"catRef\",attrs:{\"item\":\"dashboard\"},on:{\"choose\":_vm.chooseDashboard}},[_c('template',{slot:\"right-container\"},[(_vm.dashboard)?_c('div',{staticClass:\"dashboard-main\"},[_c('div',{staticClass:\"dashboard-header\"},[_c('div',{staticClass:\"title\"},[_vm._v(\" \"+_vm._s(_vm.dashboard.name)+\" \"),_c('div',{staticClass:\"remarks\"},[_vm._v(_vm._s(_vm.dashboard.remarks))])]),_c('div',{staticClass:\"button-list\"},[_c('a-button',{attrs:{\"icon\":\"bar-chart\"},on:{\"click\":_vm.addChart}},[_vm._v(\"添加图表\")]),_c('a-button',{attrs:{\"icon\":\"highlight\",\"disabled\":\"\"}},[_vm._v(\"设计\")]),_c('a-button',{attrs:{\"icon\":\"fullscreen\",\"disabled\":\"\"}},[_vm._v(\"全屏\")]),_c('a-button',{attrs:{\"icon\":\"share-alt\",\"disabled\":\"\"}},[_vm._v(\"分享\")]),_c('a-button',{attrs:{\"icon\":\"more\",\"disabled\":\"\"}},[_vm._v(\"更多\")])],1)]),_c('div',{staticClass:\"charts-container\"},[(_vm.charts.length ===0)?[_c('div',{staticClass:\"empty-block\",on:{\"click\":_vm.addChart}},[_c('div',{staticStyle:{\"margin\":\"30px\"}},[_c('a-icon',{staticClass:\"icon\",attrs:{\"type\":\"plus\"}}),_c('div',[_vm._v(\"添加图表\")])],1)])]:_vm._l((_vm.charts),function(chart){return _c('chart-item',{key:chart.id,attrs:{\"chart\":chart}})})],2)]):_vm._e()])],2),_c('a-modal',{attrs:{\"title\":\"添加图表\",\"visible\":_vm.visible,\"confirm-loading\":_vm.confirmLoading,\"destroyOnClose\":true},on:{\"ok\":_vm.handleOk,\"cancel\":function () {_vm.visible = false; _vm.form ={};}}},[_c('a-form-model-item',{attrs:{\"label\":\"选择工作表\"}},[_c('a-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"show-search\":\"\",\"filter-option\":_vm.filterOption},model:{value:(_vm.form.workSheetId),callback:function ($$v) {_vm.$set(_vm.form, \"workSheetId\", $$v)},expression:\"form.workSheetId\"}},_vm._l((_vm.workSheets),function(sheet){return _c('a-select-option',{key:sheet.workSheetId,attrs:{\"value\":sheet.workSheetId}},[_vm._v(_vm._s(sheet.title))])}),1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chart-container\"},[_c('div',{staticClass:\"chart-header\"},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.chart.name === '' ? '未命名图表' : _vm.chart.name))]),_c('div',{staticClass:\"button-list\"},[_c('a-icon',{staticClass:\"button\",attrs:{\"type\":\"edit\"},on:{\"click\":_vm.link2Editor}}),_c('a-icon',{staticClass:\"button\",attrs:{\"type\":\"redo\"},on:{\"click\":_vm.fetchData}}),_c('a-icon',{staticClass:\"button\",attrs:{\"type\":\"fullscreen\"}}),_c('a-icon',{staticClass:\"button\",style:({\n          color: _vm.fillInnerFilter ? '#4876FF': ''\n        }),attrs:{\"theme\":_vm.fillInnerFilter ? 'filled': 'outlined',\"type\":\"filter\"}}),_c('a-dropdown',[_c('a-menu',{attrs:{\"slot\":\"overlay\"},slot:\"overlay\"},[_c('a-menu-item',{key:\"3\"},[_vm._v(\"导出图片\")]),_c('a-sub-menu',{key:\"4\",attrs:{\"title\":\"导出数据\"}},[_c('a-menu-item',{key:\"4-1\"},[_vm._v(\"导出Excel\")]),_c('a-menu-item',{key:\"4-2\"},[_vm._v(\"快照工作表\")])],1),_c('a-menu-item',{key:\"5\"},[_vm._v(\"移动图表\")]),_c('a-menu-item',{key:\"6\"},[_vm._v(\"复制图表\")]),_c('a-menu-item',{key:\"7\"},[_vm._v(\"删除\")])],1),_c('a-icon',{staticClass:\"button\",attrs:{\"type\":\"more\"}})],1)],1)]),_c('div',{style:({\n    height: ((301 - (_vm.drillParam.values.length > 0 ? 21: 0)) + \"px\")\n  })},[_c('chart-box',{ref:\"chartBox\",staticStyle:{\"position\":\"relative\",\"width\":\"calc(100% - 10px)\",\"height\":\"100%\"},attrs:{\"chart-layer\":_vm.chart.sqlConfig.layers[_vm.drillParam.level],\"data\":_vm.chartData},on:{\"click\":_vm.onClick}})],1),(_vm.drillParam.values.length > 0)?_c('drill-crumbs',{attrs:{\"slot\":\"footer\",\"first\":_vm.chart.sqlConfig.drillFields[0].realAliasName,\"arr\":_vm.drillParam.values},on:{\"click\":_vm.rollUp},slot:\"footer\"}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"chart-container\">\n    <div class=\"chart-header\">\n      <div class=\"title\">{{chart.name === '' ? '未命名图表' : chart.name}}</div>\n      <div class=\"button-list\">\n        <a-icon class=\"button\" type=\"edit\" @click=\"link2Editor\" />\n        <a-icon class=\"button\" type=\"redo\" @click=\"fetchData\" />\n        <a-icon class=\"button\" type=\"fullscreen\" />\n        <a-icon\n          :theme=\"fillInnerFilter ? 'filled': 'outlined'\"\n          class=\"button\"\n          :style=\"{\n            color: fillInnerFilter ? '#4876FF': ''\n          }\"\n          type=\"filter\"\n        />\n        <a-dropdown>\n          <a-menu slot=\"overlay\">\n            <a-menu-item key=\"3\">导出图片</a-menu-item>\n            <a-sub-menu key=\"4\" title=\"导出数据\">\n              <a-menu-item key=\"4-1\">导出Excel</a-menu-item>\n              <a-menu-item key=\"4-2\">快照工作表</a-menu-item>\n            </a-sub-menu>\n            <a-menu-item key=\"5\">移动图表</a-menu-item>\n            <a-menu-item key=\"6\">复制图表</a-menu-item>\n            <a-menu-item key=\"7\">删除</a-menu-item>\n          </a-menu>\n          <a-icon class=\"button\" type=\"more\" />\n        </a-dropdown>\n      </div>\n    </div>\n    <div :style=\"{\n      height: `${301 - (drillParam.values.length > 0 ? 21: 0)}px`\n    }\">\n      <chart-box\n        ref=\"chartBox\"\n        @click=\"onClick\"\n        style=\"position: relative; width: calc(100% - 10px); height: 100%;\"\n        :chart-layer=\"chart.sqlConfig.layers[drillParam.level]\"\n        :data=\"chartData\"\n      />\n    </div>\n    <drill-crumbs\n      slot=\"footer\"\n      v-if=\"drillParam.values.length > 0\"\n      :first=\"chart.sqlConfig.drillFields[0].realAliasName\"\n      :arr=\"drillParam.values\"\n      @click=\"rollUp\"\n    />\n  </div>\n</template>\n\n<script>\nimport ChartBox from \"../components/chartBox\";\nimport DrillCrumbs from '../components/drillCrumbs'\nexport default {\n  props: [\"chart\"],\n  data() {\n    return {\n      chartData: [],\n      drillParam: {\n        level: 0,\n        values:[]\n      }\n    };\n  },\n  created() {\n    this.fetchData();\n  },\n  computed: {\n    fillInnerFilter() {\n      return this.chart.sqlConfig.innerFilters.filter(i=>i.range.length > 0).length > 0\n    }\n  },\n  components: {\n    ChartBox,\n    DrillCrumbs\n  },\n  methods: {\n    fetchData() {\n      this.$axios.post(`/chart/data/${this.chart.chartId}`,this.drillParam,{\n          timeout: 10000000\n        }).then(data => {\n        this.chartData = data;\n      });\n    },\n    link2Editor() {\n      this.$store.commit('chart/CLEAR_CHART')\n      this.$router.push({name: '编辑图表', query:{chartId: this.chart.chartId}})\n    },\n    // 和chart.js vuex中 下钻和上卷执行操作相同\n    onClick(e) {\n      if(this.drillParam.level + 1 < this.chart.sqlConfig.drillFields.length) {\n        this.drillParam.values.push(e.name)\n        this.drillParam.level+=1\n        this.fetchData()\n      }\n    },\n    rollUp(index) {\n      if (index >= this.drillParam.level) {\n        return;\n      }\n      this.drillParam.values = this.drillParam.values.slice(0, index)\n      this.chartData = []\n      this.drillParam.level = index\n      this.fetchData()\n    }\n  }\n};\n</script>\n\n<style lang=\"less\">\n.chart-container {\n  border: 1px solid #e6e6e6;\n  padding: 20px;\n  flex: calc(50% - 20px);\n  cursor: default;\n  background: #fff;\n  &:hover {\n    box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.1), 0 16px 24px 0 rgba(0, 0, 0, 0.1);\n  }\n  .chart-header {\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 10px;\n    .title {\n      font-size: 16px;\n      font-weight: 500;\n    }\n    .button-list {\n      .button {\n        margin-right: 10px;\n        cursor: pointer;\n        color: #666;\n      }\n    }\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chartItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chartItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./chartItem.vue?vue&type=template&id=3492650e&\"\nimport script from \"./chartItem.vue?vue&type=script&lang=js&\"\nexport * from \"./chartItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chartItem.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <catalogue item=\"dashboard\" @choose=\"chooseDashboard\" ref=\"catRef\">\n      <template slot=\"right-container\">\n        <div class=\"dashboard-main\" v-if=\"dashboard\">\n          <div class=\"dashboard-header\">\n            <div class=\"title\">\n              {{dashboard.name}}\n              <div class=\"remarks\">{{dashboard.remarks}}</div>\n            </div>\n            <div class=\"button-list\">\n              <a-button icon=\"bar-chart\" @click=\"addChart\">添加图表</a-button>\n              <a-button icon=\"highlight\" disabled>设计</a-button>\n              <a-button icon=\"fullscreen\" disabled>全屏</a-button>\n              <a-button icon=\"share-alt\" disabled>分享</a-button>\n              <a-button icon=\"more\" disabled>更多</a-button>\n            </div>\n          </div>\n          <div class=\"charts-container\">\n            <template v-if=\"charts.length ===0\">\n              <div class=\"empty-block\" @click=\"addChart\">\n                <div style=\"margin: 30px;\">\n                  <a-icon class=\"icon\" type=\"plus\" />\n                  <div>添加图表</div>\n                </div>\n              </div>\n            </template>\n            <template v-else>\n              <chart-item v-for=\"chart in charts\" :chart=\"chart\" :key=\"chart.id\" />\n            </template>\n          </div>\n        </div>\n      </template>\n    </catalogue>\n    <a-modal\n      title=\"添加图表\"\n      :visible=\"visible\"\n      :confirm-loading=\"confirmLoading\"\n      :destroyOnClose=\"true\"\n      @ok=\"handleOk\"\n      @cancel=\"() => {visible = false; form ={};}\"\n    >\n      <a-form-model-item label=\"选择工作表\">\n        <a-select\n          v-model=\"form.workSheetId\"\n          style=\"width: 100%;\"\n          show-search\n          :filter-option=\"filterOption\"\n        >\n          <a-select-option\n            v-for=\"sheet in workSheets\"\n            :key=\"sheet.workSheetId\"\n            :value=\"sheet.workSheetId\"\n          >{{sheet.title}}</a-select-option>\n        </a-select>\n      </a-form-model-item>\n    </a-modal>\n  </div>\n</template>\n\n<script>\nimport Catalogue from \"../components/catalogue\";\nimport ChartItem from \"./chartItem\";\nexport default {\n  data() {\n    return {\n      dashboard: null,\n      visible: false,\n      confirmLoading: false,\n      workSheets: [],\n      form: {}\n    };\n  },\n  components: {\n    Catalogue,\n    ChartItem\n  },\n  computed: {\n    charts() {\n      return this.dashboard.charts\n    }\n  },\n  methods: {\n    chooseDashboard(id) {\n      this.$axios.get(`/dashboard?id=${id}`).then(data => {\n        this.dashboard = data;\n        this.$refs.catRef.loaded();\n      });\n    },\n    addChart() {\n      this.visible = true;\n      this.$axios.get(\"/workSheet/list\").then(data => {\n        this.workSheets = data;\n      });\n    },\n    handleOk() {\n      this.confirmLoading = true;\n      this.$axios\n        .post(\"/chart\", {\n          ...this.form,\n          dashboardId: this.dashboard.dashboardId\n        })\n        .then(chartId => {\n          this.$message.success(\"创建成功！\");\n          this.visible = false;\n          this.confirmLoading = false;\n          this.$emit(\"refresh\");\n          this.$store.commit('chart/CLEAR_CHART')\n          this.$router.push({\n            name: \"编辑图表\",\n            query: { chartId }\n          });\n        })\n        .catch(() => {\n          this.confirmLoading = false;\n        });\n    },\n    filterOption(input, option) {\n      return (\n        option.componentOptions.children[0].text\n          .toLowerCase()\n          .indexOf(input.toLowerCase()) >= 0\n      );\n    }\n  }\n};\n</script>\n\n<style lang=\"less\">\n.dashboard-main {\n  padding: 20px 0px;\n  .dashboard-header {\n    display: flex;\n    justify-content: space-between;\n    .title {\n      font-size: 28px;\n      color: #4876ff;\n      .remarks {\n        font-size: 14px;\n        color: #777;\n      }\n    }\n    button {\n      margin-left: -1px;\n    }\n  }\n  .charts-container {\n    margin-top: 20px;\n    display: flex;\n    flex-wrap: wrap;\n    .empty-block {\n      padding: 40px;\n      border: 1px solid #e6e6e6;\n      width: 240px;\n      height: 240px;\n      text-align: center;\n      cursor: pointer;\n      background: #fff;\n      .icon {\n        font-size: 60px;\n        // font-weight: 100;\n        margin: auto;\n      }\n      color: #888;\n      &:hover {\n        color: #4876ff;\n        border: 1px solid #4876ff;\n      }\n    }\n    :nth-child(odd) {\n      &.chart-container {\n        margin-right: 20px;\n        max-width: calc(50% - 20px);\n      }\n    }\n    & > div {\n      margin-bottom: 20px;\n    }\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=25d36aab&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}