(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11344622"],{"057f":function(e,t,n){var r=n("fc6a"),a=n("241c").f,o={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return a(e)}catch(t){return i.slice()}};e.exports.f=function(e){return i&&"[object Window]"==o.call(e)?s(e):a(r(e))}},2532:function(e,t,n){"use strict";var r=n("23e7"),a=n("5a34"),o=n("1d80"),i=n("ab13");r({target:"String",proto:!0,forced:!i("includes")},{includes:function(e){return!!~String(o(this)).indexOf(a(e),arguments.length>1?arguments[1]:void 0)}})},"40b4":function(e,t,n){"use strict";var r=n("9d7f"),a=n.n(r);a.a},"4de4":function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").filter,o=n("1dde"),i=n("ae40"),s=o("filter"),c=i("filter");r({target:"Array",proto:!0,forced:!s||!c},{filter:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},5530:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("a4d3"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b");function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},"5a34":function(e,t,n){var r=n("44e7");e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},"6a7e":function(e,t,n){},"6e21":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dashboard-container"},[n("a-row",{attrs:{type:"flex",justify:"center",align:"top",gutter:16}},[n("a-col",{attrs:{xs:{span:7},xl:{span:5},xxl:{span:5}}},[n("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[n("a-input",{attrs:{placeholder:"过滤",icon:"FilterOutlined"},model:{value:e.filterValue,callback:function(t){e.filterValue=t},expression:"filterValue"}},[n("a-icon",{attrs:{slot:"suffix",type:"filter"},slot:"suffix"})],1),n("a-dropdown",{attrs:{trigger:["click"]}},[n("a-menu",{attrs:{slot:"overlay"},on:{click:e.handleMenuClick},slot:"overlay"},[n("a-menu-item",{key:"文件夹"},[n("a-icon",{attrs:{type:"folder"}}),e._v("创建文件夹 ")],1),n("a-menu-item",{key:"仪表盘"},[n("a-icon",{attrs:{type:"dashboard"}}),e._v("创建仪表盘 ")],1)],1),n("div",[n("a-button",{staticStyle:{"margin-left":"5px"},attrs:{icon:"plus"}})],1)],1)],1),n("div",{staticClass:"catalogue-container"},[e.treeData.length>0?n("a-tree",{attrs:{"show-icon":"","tree-data":e.filteredTreeData,defaultExpandedKeys:e.defaultExpandedKeys,selectedKeys:e.defaultSelectedKeys},on:{expand:e.expandNode,select:e.selectNode,"update:selectedKeys":function(t){e.defaultSelectedKeys=t},"update:selected-keys":function(t){e.defaultSelectedKeys=t}},scopedSlots:e._u([{key:"folder",fn:function(e){var t=e.expanded;return[n("a-icon",{staticClass:"tree-icon",attrs:{theme:"outlined",type:t?"folder-open":"folder"}})]}},{key:"title",fn:function(t){return[t.folder?[e._v(e._s(t.title))]:n("a-tooltip",{attrs:{overlayClassName:"tooltip",placement:"right",overlayStyle:{background:"#fff"}}},[n("template",{slot:"title"},["dashboard"===e.item?[n("div",[e._v("名称："+e._s(t.title))]),n("div",[e._v("备注："+e._s(t.remarks))])]:e._e(),"workSheet"===e.item?[n("div",[e._v("名称："+e._s(t.title))]),n("div",[e._v("原名："+e._s(t.tableName))]),n("div",[e._v("描述："+e._s(t.description))])]:e._e()],2),e._v(" "+e._s(t.title)+" ")],2)]}}],null,!1,2447245915)},[n("a-icon",{staticClass:"tree-icon",attrs:{slot:e.item,theme:"outlined",type:e.treeIcon},slot:e.item})],1):e._e()],1)]),n("a-col",{attrs:{xs:{span:17},xl:{span:19},xxl:{span:19}}},[n("div",{staticClass:"right-container"},[e.dashboardLoading?n("a-spin",{staticClass:"spin",attrs:{tip:"仪表盘加载中……"}}):[e._t("right-container")]],2)])],1),n("a-modal",{attrs:{title:"新建"+e.menuKey,visible:e.visible,"confirm-loading":e.confirmLoading,destroyOnClose:!0},on:{ok:e.handleOk,cancel:function(){e.visible=!1,e.form={parentId:""}}}},[n("a-form-model",e._b({model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},"a-form-model",{labelCol:{span:6},wrapperCol:{span:16}},!1),[n("a-form-model-item",{attrs:{label:"所属文件夹"}},[n("a-tree-select",{staticStyle:{width:"100%"},attrs:{"dropdown-style":{maxHeight:"400px",overflow:"auto"},"tree-data":e.selectedTreeData,"tree-default-expand-all":""},model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}})],1),n("a-form-model-item",{attrs:{label:e.menuKey+"名称"}},[n("a-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),"仪表盘"==e.menuKey?n("a-form-model-item",{attrs:{label:e.menuKey+"备注"}},[n("a-input",{attrs:{type:"textarea"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1):e._e()],1)],1)],1)},a=[],o=(n("4de4"),n("4160"),n("caad"),n("d81d"),n("b0c0"),n("2532"),n("159b"),n("5530"));function i(e,t){localStorage.setItem(e,JSON.stringify(t))}function s(e){return JSON.parse(localStorage.getItem(e))}function c(e){return e.filter((function(e){return e.folder})).map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{selectable:!0,children:c(e.children)})}))}function l(e,t){var n=[];return e.forEach((function(e){if(e.isLeaf)e.title.includes(t)&&n.push(e);else{var r=Object(o["a"])(Object(o["a"])({},e),{},{children:l(e.children,t)});r.children.length>0&&n.push(r)}})),n}var d={props:["item"],data:function(){return{treeData:[],defaultExpandedKeys:[],defaultSelectedKeys:[],filterValue:"",visible:!1,confirmLoading:!1,menuKey:"",form:{parentId:""},dashboard:{},dashboardLoading:!0}},created:function(){this.init()},components:{},computed:{selectedKeysLocalKey:function(){return"".concat(this.item,"_selectedKeys")},expandedKeysLocalKey:function(){return"".concat(this.item,"_expandedKeys")},selectedRefIdKey:function(){return"".concat(this.item,"_ref_id")},filteredTreeData:function(){return l(this.treeData,this.filterValue)},selectedTreeData:function(){return c(this.treeData)},treeIcon:function(){return"workSheet"===this.item?"table":this.item}},methods:{init:function(){var e=this;this.defaultSelectedKeys=s(this.selectedKeysLocalKey),this.defaultExpandedKeys=s(this.expandedKeysLocalKey);var t=s(this.selectedRefIdKey);this.$axios.get("/".concat(this.item,"/catalogue")).then((function(n){var r=[{name:"根目录",id:0,refId:0,folder:!0,children:n}],a=r.map((function(t){return e.convert2Node(t)}));e.treeData=a,null!=t?e.chooseDashboard(t):e.dashboardLoading=!1}))},selectNode:function(e,t){var n=t.node;i(this.selectedKeysLocalKey,e),this.selectedKeys=e,n.dataRef.folder||(i(this.selectedRefIdKey,n.dataRef.refId),n.selected||this.chooseDashboard(n.dataRef.refId))},expandNode:function(e){i(this.expandedKeysLocalKey,e)},handleMenuClick:function(e){this.menuKey=e.key,this.visible=!0},chooseDashboard:function(e){this.dashboardLoading=!0,this.$emit("choose",e)},loaded:function(){this.dashboardLoading=!1},handleOk:function(){var e=this;if(""!==this.form.parentId){var t="/".concat(this.item);"文件夹"===this.menuKey&&(t+="/folder"),this.confirmLoading=!0,this.$axios.post(t,this.form).then((function(t){t&&(e.confirmLoading=!1,e.$message.success("创建".concat(e.menuKey,"成功！")),e.visible=!1,"文件夹"!==e.menuKey&&(i(e.selectedKeysLocalKey,["node_".concat(t.nodeId)]),i(e.selectedRefIdKey,t.dashboardId)),e.init())})).catch((function(){e.confirmLoading=!1}))}else this.$message.error("所属文件夹不能为空！")},convert2Node:function(e){var t=this,n=Object(o["a"])(Object(o["a"])({title:e.name},e),{},{key:"node_"+e.id,value:e.id,isLeaf:!e.folder||0===e.children.length,children:e.children.map((function(e){return t.convert2Node(e)})),selectable:!e.folder});return e.folder?n.scopedSlots={icon:"folder",title:"title"}:n.scopedSlots={icon:this.item,title:"title"},n}}},f=d,u=(n("6e4a"),n("2877")),h=Object(u["a"])(f,r,a,!1,null,null,null);t["a"]=h.exports},"6e4a":function(e,t,n){"use strict";var r=n("6a7e"),a=n.n(r);a.a},"746f":function(e,t,n){var r=n("428f"),a=n("5135"),o=n("e5383"),i=n("9bf2").f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});a(t,e)||i(t,e,{value:o.f(e)})}},7680:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("catalogue",{ref:"catRef",attrs:{item:"workSheet"},on:{choose:e.chooseWorkSheet}},[n("template",{slot:"right-container"},[n("work-sheet-detail",{attrs:{data:e.workSheet}})],1)],2)],1)},a=[],o=n("6e21"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"work-sheet-detail-container"},[n("div",{staticClass:"work-sheet-header"},[n("div",{staticClass:"title"},[e._v(" "+e._s(e.data.title)+" "),n("div",{staticClass:"description"},[e._v(e._s(e.data.description))])]),n("div",{staticClass:"button-list"},[n("a-button",{attrs:{icon:"bar-chart"}},[e._v("新建图表")]),n("a-button",{attrs:{icon:"file-excel"}},[e._v("上传数据")]),n("a-button",{attrs:{icon:"share-alt"}},[e._v("创建合表")])],1)]),n("a-tabs",{staticClass:"tabs",attrs:{"default-active-key":"2"},on:{change:e.chooseTab}},[n("a-tab-pane",{key:"1",attrs:{tab:"数据预览"}},[e._v("数据预览")]),n("a-tab-pane",{key:"2",attrs:{tab:"字段设置","force-render":""}},[n("field-list",{attrs:{data:e.data.fields}})],1)],1)],1)},s=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-table",{attrs:{pagination:!1,size:"small","data-source":e.data,columns:e.columns}})],1)},l=[],d=[{title:"行数",dataIndex:"seqNo"},{title:"原字段名",dataIndex:"name"},{title:"新字段名",dataIndex:"title"},{title:"字段类型",dataIndex:"type",scopedSlots:{customRender:"type"}},{title:"字段描述",dataIndex:"remarks"}],f={props:["data"],data:function(){return{columns:d}}},u=f,h=n("2877"),p=Object(h["a"])(u,c,l,!1,null,null,null),m=p.exports,b={props:["data"],data:function(){return{tabKey:2}},components:{FieldList:m},methods:{chooseTab:function(){}}},y=b,v=(n("40b4"),Object(h["a"])(y,i,s,!1,null,null,null)),g=v.exports,O={data:function(){return{workSheet:{}}},components:{Catalogue:o["a"],WorkSheetDetail:g},methods:{chooseWorkSheet:function(e){var t=this;this.$axios.get("/workSheet?id=".concat(e)).then((function(e){t.workSheet=e,t.$refs.catRef.loaded()}))}}},w=O,x=Object(h["a"])(w,r,a,!1,null,null,null);t["default"]=x.exports},"9d7f":function(e,t,n){},a4d3:function(e,t,n){"use strict";var r=n("23e7"),a=n("da84"),o=n("d066"),i=n("c430"),s=n("83ab"),c=n("4930"),l=n("fdbf"),d=n("d039"),f=n("5135"),u=n("e8b5"),h=n("861d"),p=n("825a"),m=n("7b0b"),b=n("fc6a"),y=n("c04e"),v=n("5c6c"),g=n("7c73"),O=n("df75"),w=n("241c"),x=n("057f"),S=n("7418"),k=n("06cf"),_=n("9bf2"),K=n("d1e7"),j=n("9112"),I=n("6eeb"),C=n("5692"),D=n("f772"),L=n("d012"),P=n("90e3"),E=n("b622"),N=n("e5383"),$=n("746f"),R=n("d44e"),T=n("69f3"),J=n("b727").forEach,V=D("hidden"),F="Symbol",W="prototype",A=E("toPrimitive"),M=T.set,q=T.getterFor(F),z=Object[W],H=a.Symbol,Q=o("JSON","stringify"),B=k.f,G=_.f,U=x.f,X=K.f,Y=C("symbols"),Z=C("op-symbols"),ee=C("string-to-symbol-registry"),te=C("symbol-to-string-registry"),ne=C("wks"),re=a.QObject,ae=!re||!re[W]||!re[W].findChild,oe=s&&d((function(){return 7!=g(G({},"a",{get:function(){return G(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=B(z,t);r&&delete z[t],G(e,t,n),r&&e!==z&&G(z,t,r)}:G,ie=function(e,t){var n=Y[e]=g(H[W]);return M(n,{type:F,tag:e,description:t}),s||(n.description=t),n},se=l?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof H},ce=function(e,t,n){e===z&&ce(Z,t,n),p(e);var r=y(t,!0);return p(n),f(Y,r)?(n.enumerable?(f(e,V)&&e[V][r]&&(e[V][r]=!1),n=g(n,{enumerable:v(0,!1)})):(f(e,V)||G(e,V,v(1,{})),e[V][r]=!0),oe(e,r,n)):G(e,r,n)},le=function(e,t){p(e);var n=b(t),r=O(n).concat(pe(n));return J(r,(function(t){s&&!fe.call(n,t)||ce(e,t,n[t])})),e},de=function(e,t){return void 0===t?g(e):le(g(e),t)},fe=function(e){var t=y(e,!0),n=X.call(this,t);return!(this===z&&f(Y,t)&&!f(Z,t))&&(!(n||!f(this,t)||!f(Y,t)||f(this,V)&&this[V][t])||n)},ue=function(e,t){var n=b(e),r=y(t,!0);if(n!==z||!f(Y,r)||f(Z,r)){var a=B(n,r);return!a||!f(Y,r)||f(n,V)&&n[V][r]||(a.enumerable=!0),a}},he=function(e){var t=U(b(e)),n=[];return J(t,(function(e){f(Y,e)||f(L,e)||n.push(e)})),n},pe=function(e){var t=e===z,n=U(t?Z:b(e)),r=[];return J(n,(function(e){!f(Y,e)||t&&!f(z,e)||r.push(Y[e])})),r};if(c||(H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=P(e),n=function(e){this===z&&n.call(Z,e),f(this,V)&&f(this[V],t)&&(this[V][t]=!1),oe(this,t,v(1,e))};return s&&ae&&oe(z,t,{configurable:!0,set:n}),ie(t,e)},I(H[W],"toString",(function(){return q(this).tag})),I(H,"withoutSetter",(function(e){return ie(P(e),e)})),K.f=fe,_.f=ce,k.f=ue,w.f=x.f=he,S.f=pe,N.f=function(e){return ie(E(e),e)},s&&(G(H[W],"description",{configurable:!0,get:function(){return q(this).description}}),i||I(z,"propertyIsEnumerable",fe,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:H}),J(O(ne),(function(e){$(e)})),r({target:F,stat:!0,forced:!c},{for:function(e){var t=String(e);if(f(ee,t))return ee[t];var n=H(t);return ee[t]=n,te[n]=t,n},keyFor:function(e){if(!se(e))throw TypeError(e+" is not a symbol");if(f(te,e))return te[e]},useSetter:function(){ae=!0},useSimple:function(){ae=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!s},{create:de,defineProperty:ce,defineProperties:le,getOwnPropertyDescriptor:ue}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:he,getOwnPropertySymbols:pe}),r({target:"Object",stat:!0,forced:d((function(){S.f(1)}))},{getOwnPropertySymbols:function(e){return S.f(m(e))}}),Q){var me=!c||d((function(){var e=H();return"[null]"!=Q([e])||"{}"!=Q({a:e})||"{}"!=Q(Object(e))}));r({target:"JSON",stat:!0,forced:me},{stringify:function(e,t,n){var r,a=[e],o=1;while(arguments.length>o)a.push(arguments[o++]);if(r=t,(h(t)||void 0!==e)&&!se(e))return u(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!se(t))return t}),a[1]=t,Q.apply(null,a)}})}H[W][A]||j(H[W],A,H[W].valueOf),R(H,F),L[V]=!0},ab13:function(e,t,n){var r=n("b622"),a=r("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[a]=!1,"/./"[e](t)}catch(r){}}return!1}},caad:function(e,t,n){"use strict";var r=n("23e7"),a=n("4d64").includes,o=n("44d2"),i=n("ae40"),s=i("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:!s},{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},dbb4:function(e,t,n){var r=n("23e7"),a=n("83ab"),o=n("56ef"),i=n("fc6a"),s=n("06cf"),c=n("8418");r({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){var t,n,r=i(e),a=s.f,l=o(r),d={},f=0;while(l.length>f)n=a(r,t=l[f++]),void 0!==n&&c(d,t,n);return d}})},e439:function(e,t,n){var r=n("23e7"),a=n("d039"),o=n("fc6a"),i=n("06cf").f,s=n("83ab"),c=a((function(){i(1)})),l=!s||c;r({target:"Object",stat:!0,forced:l,sham:!s},{getOwnPropertyDescriptor:function(e,t){return i(o(e),t)}})},e5383:function(e,t,n){var r=n("b622");t.f=r}}]);
//# sourceMappingURL=chunk-11344622.34c63e55.js.map